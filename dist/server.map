{"version":3,"sources":["src/components/Home/index.js","src/store/store.js","src/components/Users/index.js","src/App.js","src/ssr.js","server.js"],"names":["Home","Component","render","actions","store","increment","state","count","decrement","initialState","Users","App","getComponent","name","url","cb","props","componentOrPromise","then","module","default","component","exports","html","fs","require","path","express","app","use","static","__dirname","orignHTML","readFileSync","toString","ssr","get","req","res","initData","ssrData","result","replace","JSON","stringify","send","PORT","listen","console","log"],"mappings":";;;;;;;AAAA;;AAEe,AIFf,MJEqBA,IAAN,SAAmBC,iBAAnB,CAA6B;AAC1CC,ACHF,WDGW;AKHX,ALII,AEJJ,AEEA,MCFMsB,KAAKC,ALKL,QKLa,IAAR,CAAX;AACA,ALIM,MKJAC,OAAOD,QAAQ,MAAR,CAAb;AACA,AFFA,AHKM,AEJN,AEEA,MCDME,ELGK,QKHKF,CLGC,OKHO,ILGlB,KKHU,CAAhB;AACA,ALEM,MKFAG,MAAMD,SAAZ;AACAC,AFHA,AHYQ,AEXR,IGEIC,GAAJ,CAAQ,SAAR,EAAmBF,QAAQG,MAAR,CAAeC,YAAY,SAA3B,CAAnB;ALSQ,ACXD,IAAI5B,4BAAUC,UAAU;AII/B,AFJA,AHWQ,AETR,AEAA,AHDEC,MIGI2B,AHFAtB,IFSK,CETX,CDDYJ,IDUI,CCVd,CIGgBkB,CJHC,CCCCvB,CGECgC,GLOb,SKPU,CAAgBF,GHFlC,CAA8B,QGEgB,oBAA5B,EAAkDG,QAAlD,EAAlB;AACA,ALMQ,AERNhC,ADDE,MIGEiC,GHFG,EAAE5B,ADDA,CIGCkB,CJHClB,GCCJ,EAASF,EGEE,AJHAC,MAAMC,CCCjB,EAAoBC,EGEjB,AJHQ,CIGpB,EJHkC,CAAvB,EAAP,CCCK,EAAP,EAAwC;AGG1CoB,ALKQ,AEPJ,ADDD,GAH4B,CIM3BQ,GAAJ,CAAQ,GAAR,AHDM,EGCO,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzB,ALJI,AEEA,ADDJ9B,KDFE,GKKI+B,IJHIjC,KAAV,EIGiB,AJHA,EIGEC,OAAO,CAAT,EAAjB;AACA,AFPF,AHaG,AETG,AEFN,AHEI,QIGIiC,AHHG,GDAA,EAAEjC,ICAI,CGGC4B,EJHE7B,EIGE+B,IAAIX,AJHAnB,GCApB,CGGY,CJHE,CIGYgC,EJHE,CAAvB,EAAP,GIGc,CAAhB;AACA,ALT0C,AEMnChC,ADAN,QIGKkC,GHJF,MGIWT,UACZU,OADY,CACJ,sBADI,EACoBF,QAAQjB,IAD5B,EAEZmB,OAFY,CAEJ,eAFI,EAEaC,KAAKC,SAAL,CAAeJ,QAAQlC,KAAvB,EAA8BoC,OAA9B,CAAsC,MAAtC,EAA8C,EAA9C,CAFb,CAAf;AAGAJ,AHLM,ADPuB,CAAV,CAAd,IIYDO,IAAJ,CAASJ,MAAT,CLZmBzC;AKapB,AHNO,CGDR;AFJA,ADKQ,UAAQ,QDEDS,CCFO,eAAd,ADEuB,ECFO,SAASJ,SAAvC,IDEmCI,YAAZ;AIM/BmB,AHRQ,IGQJQ,GAAJ,CAAQ,QAAR,EAAkB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC9B,AHTM,AEFRnB,OFAM,AEACG,CCWCiB,MDXR,GAAiB,ECWE,EAAEhC,MDXKO,CCWE,CAAT,CDXF,CCWf,CDX6BV,KAAd,EAAqB;ACYpC,AHPM,AEJN,QCWMoC,ADXAjB,OAAO,GCWGY,IAAIE,IAAIX,IAAR,EAAca,QAAd,CAAhB,UDXoB,eAAE5B,aAAF,EAAO,EAAEP,OAAO,wBAAYA,KAAZ,CAAT,EAA6BU,KAAKA,GAAlC,EAAP,CAAP,CAAb;ACYA,AFfF,ADOQ,AEHN,QCWM2B,CDXC,QCWQT,UACZU,OADY,CACJ,sBADI,EACoBF,QAAQjB,IAD5B,EAEZmB,OAFY,CAEJ,eAFI,EAEaC,KAAKC,SAAL,CAAeJ,QAAQlC,KAAvB,EAA8BoC,OAA9B,CAAsC,MAAtC,EAA8C,EAA9C,CAFb,CAAf;AAGAJ,AHXM,AEFJf,MCaEsB,EDdG,ECcP,AHXc,CGWLJ,MAAT,EHXoB,eAAd,EAA8B,SAASjC,SAAvC;AGYP,AHZO,AEDJF,CCMJ,UDNWF;AFCH,AEHC,GAAP,IFFI;AGmBN,AFnBe,ADAT,AEML,CAND,KCmBM0C,AFnBenC,GAAN,IEmBF,KFnBoBV,QEmBA,IAAjC,KFnBe,CAA4B;AEoB3C2B,AFnBE,ADDI,IGoBFmB,CHrBA,KGqBJ,CAAWD,IAAX,EAAiB,MAAM;AACrBE,AFnBA,ADaC,UGMOC,GAAR,CAAa,0BAAyBH,IAAK,EAA3C;AACD,AFnBC,ADN4B,CGuB9B;AFhBE,kBDaa,sBAAQ,OAAR,EAAiB3C,cAAjB,EAA0BO,KAA1B;ACZb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAE,eAAaC,IAAb,EAAmB;AACjB,WAAO,CAACC,GAAD,EAAMC,EAAN,EAAUC,KAAV,KAAoB;AACzB,YAAMC,6BAA6B,gBAAeJ,IAAK,EAAjD,CAAN;AACA,UAAII,mBAAmBC,IAAvB,EAA6B;AAC3B,eAAOD,mBAAmBC,IAAnB,CAAwBC,UAAUA,OAAOC,OAAzC,CAAP;AACD,OAFD,MAEO,IAAIH,mBAAmBG,OAAvB,EAAgC;AACrCL,WAAG,EAAEM,WAAWJ,mBAAmBG,OAAhC,EAAH;AACD;AACF,KAPD;AAQD;AACDlB,SAAOc,KAAP,EAAc;AACZ,WACE;AAAA;AAAA,QAAK,IAAG,KAAR;AACE;AAAC,yBAAD;AAAA,UAAU,OAAOA,MAAMZ,KAAvB;AACE;AAAC,8BAAD;AAAA,YAAQ,KAAKY,MAAMF,GAAnB;AACE,yBAAC,0BAAD,IAAY,MAAK,GAAjB,EAAqB,cAAc,KAAKF,YAAL,CAAkB,MAAlB,CAAnC,GADF;AAEE,yBAAC,0BAAD;AACE,kBAAK,QADP;AAEE,0BAAc,KAAKA,YAAL,CAAkB,OAAlB;AAFhB;AAFF;AADF;AADF,KADF;AAaD;AAzCwC;kBAAtBD","file":"server.map","sourceRoot":"..","sourcesContent":["import { Component, h } from 'preact'\n\nexport default class Home extends Component {\n  render() {\n    return (\n      <div class=\"page-home\">\n        I'm from Home Page,Lsorem ipsum dolor sit amet, consectetur adipiscing\n        elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n        Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi\n        ut aliquip ex ea commodo consequat. Duis aute irure dolor in\n        reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla\n        pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa\n        qui officia deserunt mollit anim id est laborum.\n        <a href=\"/users\">users</a>\n      </div>\n    )\n  }\n}\n","import createStore from 'unistore'\n\nexport let actions = store => ({\n  increment(state) {\n    return { count: state.count + 1 }\n  },\n  decrement(state) {\n    return { count: state.count - 1 }\n  }\n})\n\nexport default initialState => createStore(initialState)\n","import { Component, h } from 'preact'\nimport { connect } from 'unistore/preact'\nimport { actions } from '../../store/store'\n\nclass Users extends Component {\n  render({ count, increment, decrement }) {\n    return (\n      <div class=\"page-users\">\n        {count}\n        <button class=\"increment-btn\" onClick={increment}>\n          Increment\n        </button>\n        <button class=\"decrement-btn\" onClick={decrement}>\n          Decrement\n        </button>\n        Rhoncus habitasse pellentesque. Ut aliquam eu. Et risus lectus. Dictum\n        sit natoque et commodo posuere amet tempor eros lacus tincidunt\n        facilisis rhoncus tellus ac. Pulvinar laoreet magna mauris justo\n        viverra. Metus deleniti lacinia sed lacinia vestibulum pede id tincidunt\n        imperdiet vestibulum magna vestibulum curabitur\n      </div>\n    )\n  }\n}\nexport default connect('count', actions)(Users)\n","import { Component, h } from 'preact'\nimport { Router } from 'preact-router'\nimport Home from './components/Home'\nimport Users from './components/Users'\nimport AsyncRoute from 'preact-async-route'\nimport { Provider } from 'unistore/preact'\n\nexport default class App extends Component {\n  // getHome(url, cb, props) {\n  //   const componentOrPromise = import('./components/Home')\n  //   if (componentOrPromise.then) {\n  //     return componentOrPromise.then(module => module.default)\n  //   } else if (componentOrPromise.default) {\n  //     cb({ component: componentOrPromise.default })\n  //   }\n  // }\n  // getUser(url, cb, props) {\n  //   const componentOrPromise = import('./components/Users')\n  //   if (componentOrPromise.then) {\n  //     return componentOrPromise.then(module => module.default)\n  //   } else if (componentOrPromise.default) {\n  //     cb({ component: componentOrPromise.default })\n  //   }\n  // }\n  getComponent(name) {\n    return (url, cb, props) => {\n      const componentOrPromise = import(`./components/${name}`)\n      if (componentOrPromise.then) {\n        return componentOrPromise.then(module => module.default)\n      } else if (componentOrPromise.default) {\n        cb({ component: componentOrPromise.default })\n      }\n    }\n  }\n  render(props) {\n    return (\n      <div id=\"app\">\n        <Provider store={props.store}>\n          <Router url={props.url}>\n            <AsyncRoute path=\"/\" getComponent={this.getComponent('Home')} />\n            <AsyncRoute\n              path=\"/users\"\n              getComponent={this.getComponent('Users')}\n            />\n          </Router>\n        </Provider>\n      </div>\n    )\n  }\n}\n","'use strict'\n\nimport { h } from 'preact'\nimport render from 'preact-render-to-string'\nimport App from './App'\nimport createStore from 'unistore'\n\nmodule.exports = function(url, store) {\n  const html = render(h(App, { store: createStore(store), url: url }))\n  return {\n    html,\n    state: store\n  }\n}\n","const fs = require('fs')\nconst path = require('path')\nconst express = require('express')\nconst app = express()\napp.use('/public', express.static(__dirname + '/public'))\n\nconst orignHTML = fs.readFileSync(__dirname + '/public/index.html').toString()\nconst ssr = require('./src/ssr')\napp.get('/', (req, res) => {\n  const initData = { count: 0 }\n  const ssrData = ssr(req.path, initData)\n  const result = orignHTML\n    .replace('<div id=\"app\"></div>', ssrData.html)\n    .replace('\"${ STATE };\"', JSON.stringify(ssrData.state).replace(/<|>/g, ''))\n  res.send(result)\n})\n\napp.get('/users', (req, res) => {\n  const initData = { count: 0 }\n  const ssrData = ssr(req.path, initData)\n  const result = orignHTML\n    .replace('<div id=\"app\"></div>', ssrData.html)\n    .replace('\"${ STATE };\"', JSON.stringify(ssrData.state).replace(/<|>/g, ''))\n  res.send(result)\n})\n\nconst PORT = process.env.PORT || 3000\napp.listen(PORT, () => {\n  console.log(`Preact Server start on ${PORT}`)\n})\n"]}